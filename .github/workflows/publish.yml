# Publishes the latest release to ESOUI

name: PublishToESOUI

on:
  release:
    types:
      - published

jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4.6.0
        with:
          python-version: "^3.6"

      # todo: check for version, only publish if release is newer!
      # do not publish if already was published!
      # that is also to catch cases in which, for whatever reason, older releases are created. we do not want them to be uploaded to ESOUI, where they could replace or break existing releases
      - name: Check Version
        run: echo "check version" #todo

      # todo: upload release
      - name: Publish
        run: echo "python ./.scripts/publish.py" # todo
        env: # todo: make it available in os.env, do not log!
          ESOUI_API_TOKEN: ${{ secrets.ESOUI_API_TOKEN }}
